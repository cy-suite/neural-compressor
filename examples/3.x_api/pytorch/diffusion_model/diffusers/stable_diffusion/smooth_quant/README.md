Step-by-Step
============

This example demonstrates how to use SmoothQuant along with PTQ on stable diffusion XL model to accelerate inference while maintain the quality of output image.

# Prerequisite

## Environment
Recommend python 3.9 or higher version.

```shell
pip install -r requirements.txt
```
**Note**: IPEX along with torch require nightly version (2.4) for compatibility. Please refer to [installation](https://intel.github.io/intel-extension-for-pytorch/index.html#installation?platform=cpu&version=main&os=linux%2fwsl2&package=source). 

# Run example

Use below command to run this example.
```bash
python sdxl_smooth_quant.py --model_name_or_path stabilityai/stable-diffusion-xl-base-1.0
```

# Results

Here is the comparison of images generated by the FP32 model (left) and INT8 model (right) respectively:

<p float="left">
  <img src="./images/fp32.jpg" width = "300" height = "300" alt="bf16" align=center />
  <img src="./images/int8.jpg" width = "300" height = "300" alt="int8" align=center />
</p>