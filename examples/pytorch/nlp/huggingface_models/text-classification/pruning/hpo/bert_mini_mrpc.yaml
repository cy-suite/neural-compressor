version: 1.0

model:
  name: "bert-mini"
  framework: "pytorch"

pruning:
  approach:
    weight_compression_v2:
      start_step: 0
      end_step: 0

      pruning_op_types: ["Linear"]
      target_sparsity: 0.9
      max_sparsity_ratio_per_op: 0.9

      pruners:
        - !PrunerV2
            excluded_op_names: ["classifier", "pooler", ".*embeddings*"]
            pattern: "4x1"
            pruning_frequency: 50
            pruning_scope: "global"
            pruning_type: "snip_momentum"
            sparsity_decay_type: "exp"


#        - !Pruner
#          start_step: 0
#          end_step: 0
#          pruning_op_types: ["Embedding"]
#          ##op_names: [".*embeddings*" ]
#          pattern: "1x1"
#          pruning_frequency: 50
#          pruning_scope: "global"
#          pruning_type: "pattern_lock"
#          sparsity_decay_type: "exp"
#          reg_type: "fgm"
#          parameters: { 'reg_coeff': 1.0 }





